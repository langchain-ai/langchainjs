[
  {
    "name": "throw immediate in tool call",
    "throwWithin": "toolCall",
    "throwTimming": "immediate",
    "errorHandler": "bubbleUp",
    "expectedToolCalls": 1,
    "expectedError": "tool call error"
  },
  {
    "name": "throw delayed in tool call",
    "throwWithin": "toolCall",
    "throwTimming": "delayed",
    "errorHandler": "bubbleUp",
    "expectedToolCalls": 4,
    "expectedError": "tool call error"
  },
  {
    "name": "throw immediate in tool call",
    "throwWithin": "toolCall",
    "throwTimming": "immediate",
    "errorHandler": "cached",
    "expectedToolCalls": 1,
    "expectedResult": "123"
  },
  {
    "name": "throw delayed in tool call",
    "throwWithin": "toolCall",
    "throwTimming": "delayed",
    "errorHandler": "cached",
    "expectedToolCalls": 4,
    "expectedResult": "123"
  },
  {
    "name": "throw immediate in prompt",
    "throwWithin": "prompt",
    "throwTimming": "immediate",
    "expectedToolCalls": 0,
    "expectedError": "prompt error"
  },
  {
    "name": "throw delayed in prompt",
    "throwWithin": "prompt",
    "throwTimming": "delayed",
    "expectedToolCalls": 3,
    "expectedError": "prompt error"
  },
  {
    "name": "throw immediate in preModelHook",
    "throwWithin": "preModelHook",
    "throwTimming": "immediate",
    "expectedToolCalls": 0,
    "expectedError": "preModelHook error"
  },
  {
    "name": "throw delayed in preModelHook",
    "throwWithin": "preModelHook",
    "throwTimming": "delayed",
    "expectedToolCalls": 3,
    "expectedError": "preModelHook error"
  },
  {
    "name": "throw immediate in postModelHook",
    "throwWithin": "postModelHook",
    "throwTimming": "immediate",
    "expectedToolCalls": 0,
    "expectedError": "postModelHook error"
  },
  {
    "name": "throw delayed in postModelHook",
    "throwWithin": "postModelHook",
    "throwTimming": "delayed",
    "expectedToolCalls": 3,
    "expectedError": "postModelHook error"
  }
]
